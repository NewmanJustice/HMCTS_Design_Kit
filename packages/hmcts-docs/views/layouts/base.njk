<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>{{ pageTitle }} â€” HMCTS Design System (Dev)</title>
        <link rel="stylesheet" href="/assets/hmcts.css" />
    </head>
    <body>
        {% include "partials/header.njk" %}
        <div class="hmcts-container hmcts-u-pt-5 hmcts-u-pb-5">
            <div class="hmcts-docs-layout">
            <aside class="hmcts-docs-layout__sidebar">
                {% include "partials/side-nav.njk" %}
            </aside>
            <main>
                {% block content %}{% endblock %}
            </main>
            </div>
        </div>
        {% include "partials/footer.njk" %}
        <script>
        (function () {
            function setStatus(key, message) {
                var el = document.querySelector('[data-copy-status="' + key + '"]');
                if (!el) return;
                el.textContent = message;
                window.setTimeout(function () {
                if (el.textContent === message) el.textContent = "";
                }, 2000);
            }

            async function copyText(text) {
                if (navigator.clipboard && window.isSecureContext) {
                await navigator.clipboard.writeText(text);
                return;
                }
                // Fallback for older browsers / non-secure contexts
                var ta = document.createElement("textarea");
                ta.value = text;
                ta.setAttribute("readonly", "");
                ta.style.position = "absolute";
                ta.style.left = "-9999px";
                document.body.appendChild(ta);
                ta.select();
                document.execCommand("copy");
                document.body.removeChild(ta);
            }

            document.addEventListener("click", async function (e) {
                var btn = e.target.closest("[data-copy-target]");
                if (!btn) return;

                var key = btn.getAttribute("data-copy-target");
                var code = document.querySelector('[data-copy-source="' + key + '"]');
                if (!code) return;

                try {
                await copyText(code.textContent);
                setStatus(key, "Copied to clipboard");
                btn.textContent = "Copied";
                window.setTimeout(function () { btn.textContent = "Copy"; }, 1500);
                } catch (err) {
                setStatus(key, "Copy failed");
                }
            });
            })();
        </script>
    </body>
</html>
